# 2023.09.13

### **9월 13일 학습 목표**

1. HTTP 프로토콜의 특징을 이해
2. 상태유지 기법 ( 1. hidden tag, 2. Cookie, 3.Session, 4.URLRewriting )을 이해하고 활용
3. Connection Pool을 이해하고 활용

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/af24a09c-661e-49f0-8040-f1d0a9110aec/8743c2e5-bcd0-42f6-b132-2ed0631500c9/Untitled.png)

### TCP vs UDP

- TCP
    - 같은 경로로만 다니므로 신뢰성이 높다.
    - 많은 데이터의 경우 전송속도가 느리다.
- UDP :
    - 동시에 보내서 데이터가 트래픽이 없는 곳으로 알아서 간다.
    - 전송속도가 빠르지만 신뢰성이 낮다.
- HTTP
    - TCP 형식.
    - Stateless, 상태를 유지하지 않는 프로토콜.
    - 서버에 접속하고 연결을 끊지 않으면 과부하가 걸리므로 응답을 받으면 연결을 끊는다.
    - 연결이 끊기므로 다음 작업을 바로 수행할 때 이전 작업에서 무엇을 했는지 기억할 수 없다.

### 상태유지기법?

1. Hidden Tag
    - <input type=”hidden”>..
    - 나갔을 때 보여지지 않지만, 들어올 때 값을 가지고 들어올 수 있다.
2. Cookie
    - Cookie c = new Cookie(”이름”, “값”);
    - response.addCookie(c);
    - 서버가 쿠키를 만들어서 브라우저에 응답을 보낸다.
    - 브라우저가 접근한 사이트에 쿠키를 기록한다(문자열만 가능함).
    - 나중에 서버로 요청을 보낼 때 쿠키를 가져가서 서버로 들어간다.
    - 서버에 부하가 없다. 클라이언트가 다 기억하기 때문.
    - 오랫동안 보관할 수 있다.
    - 파일로 기록되므로 언제든지 삭제될 수 있다.
    - 보안 이슈도 있다.
    - 길이가 제한적이고, 문자열만 저장된다.
    - 네트워크에 부하.
3. HttpSession
    - 브라우저 당 세션이 하나씩 생긴다.
    - 서버의 응답이 밖으로 나갈 때 세션에 대한 정보를 기록하는 쿠키를 자동으로 만들어 나간다.
    - 클라이언트에서 서버로 들어올 때 세션 정보 쿠키를 들고 들어가서 세션을 찾는다.
    - HttpSession hs = request.getSession();
    - Session ID가 있으면 그 객체를 리턴하고, 없다면 세션을 만들어서(new HttpSession()) 리턴한다.
        - getSession(false);면 없다면 null 리턴함.
    - hs.setAttribute(”key”,value); value에 쿠키랑 다르게 객체도 가능함.
    - hs.getAttribute(”key”);하면 값 받아오기도 가능함.
    - 쿠키의 단점을 모두 상쇄할 수 있다.
    - 다만 쿠키 저장을 못하도록 막으면, 세션 정보를 담은 쿠키를 저장할 수 없으므로 세션을 사용할 수 없다.
4. URL Rewriting
    - <a href=”url?;sessionid=123”>처럼 모든 링크 뒤에 세션 id를 기록해둔다.
    - 다만, 세션 id가 모두에게 공개되므로 보안적으로 문제가 생긴다.

### Connection Pool

- 수많은 커넥션이 동시에 연결된다면 과부하가 걸릴 수 있으므로 이를 방지하기 위해 사용.
- 이미 커넥션이 만들어져 있으므로, DAO에서 사용할 때 가져오기만 하면 됨.
